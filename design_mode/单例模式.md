### 单例模式

#### 1. 介绍

单例模式是最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。

这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。

#### 2.特点

单例模式有 3 个特点：

1. 单例类只有一个实例对象；
2. 该单例对象必须由单例类自行创建；
3. 单例类对外提供一个访问该单例的全局访问点。

#### 3.单例模式的结构

单例模式的主要角色如下。

- 单例类：包含一个实例且能自行创建这个实例的类。
- 访问类：使用单例的类。

![单例类图](C:\Users\Lenovo\Desktop\mg\单例类图.png)



#### 4.单例模式的优点和缺点

单例模式的优点：

- 单例模式可以保证内存里只有一个实例，减少了内存的开销。
- 可以避免对资源的多重占用。
- 单例模式设置全局访问点，可以优化和共享资源的访问。

 单例模式的缺点：

- 单例模式一般没有接口，扩展困难。如果要扩展，则除了修改原来的代码，没有第二种途径，违背开闭原则。
- 在并发测试中，单例模式不利于代码调试。在调试过程中，如果单例中的代码没有执行完，也不能模拟生成一个新的对象。
- 单例模式的功能代码通常写在一个类中，如果功能设计不合理，则很容易违背单一职责原则。

#### 5.实现方式

1. 懒汉式
2. 饿汉式
3. 双检锁
4. 登记式/静态内部类
5. 枚举

#### 6.代码实现

```c#
namespace Singleton_Pattern
{
    class Program
    {
        static void Main(string[] args)
        {
            //获取唯一可用的对象
            Singleton myobject = Singleton.getInstance();

            //显示消息
            myobject.output();
        }
       
    }
    //饿汉式
    public class Singleton
    {

        //创建 Singleton的一个对象
        private static Singleton instance = new Singleton();

        //让构造函数为 private，这样该类就不会被实例化
        private Singleton() { }

        //获取唯一可用的对象
        public static Singleton getInstance()
        {
            return instance;
        }

        public void output()
        {
            Console.Write("Hello，我是单例模式!");
            Console.ReadKey();
        }
    }
}
```

##### 运行结果

![](C:\Users\Lenovo\Desktop\mg\单例模式.PNG)

